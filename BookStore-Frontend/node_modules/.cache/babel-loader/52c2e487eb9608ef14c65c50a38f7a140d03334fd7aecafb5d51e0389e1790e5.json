{"ast":null,"code":"import './background.css';\nexport default function Background() {\n  //配置\n  const count = 320,\n    //点数量\n    speed = 1,\n    //点平均速度\n    dist = 60,\n    //点间成线最大距离\n    image = \"../../src/background.png\",\n    //图片地址\n    rSpeed = 0.05,\n    //图片旋转速度\n    rMax = 80,\n    //图片旋转最大角度\n    frame = 20; //帧率\n\n  var cvs = document.createElement(\"canvas\"),\n    div = document.createElement(\"div\"),\n    ctx = cvs.getContext(\"2d\"),\n    w = cvs.width = window.innerWidth,\n    h = cvs.height = window.innerHeight,\n    r = 0,\n    rVel = rSpeed,\n    points = [];\n  cvs.id = \"background-canvas\";\n  div.id = \"background-image\";\n  div.style.backgroundImage = \"url('\" + image + \"')\";\n  document.body.appendChild(cvs);\n  document.body.appendChild(div);\n  for (var i = 0; i < count; ++i) {\n    points.push({\n      size: Math.random() * 4 + 0.5,\n      pos: {\n        x: Math.random() * w,\n        y: Math.random() * h\n      },\n      vel: {\n        x: (Math.random() - 0.5) * speed,\n        y: (Math.random() - 0.5) * speed\n      },\n      color: {\n        r: Math.random() * 255,\n        g: Math.random() * 255,\n        b: Math.random() * 255\n      }\n    });\n  }\n  setInterval(() => {\n    w = window.innerWidth;\n    h = window.innerHeight;\n    r += rVel;\n    if (r > rMax && rVel > 0 || r < -rMax && rVel < 0) rVel *= -1;\n    div.style.transform = \"rotate(\" + r + \"deg)\";\n    ctx.clearRect(0, 0, w, h);\n    points.forEach((p, idx) => {\n      p.pos.x += p.vel.x;\n      p.pos.y += p.vel.y;\n      if (p.pos.x <= 0 && p.vel.x < 0 || p.pos.x >= w && p.vel.x > 0) p.vel.x *= -1;\n      if (p.pos.y <= 0 && p.vel.y < 0 || p.pos.y >= h && p.vel.y > 0) p.vel.y *= -1;\n      ctx.fillStyle = \"white\";\n      ctx.fillRect(p.pos.x - p.size / 2, p.pos.y - p.size / 2, p.size, p.size);\n      for (var i = idx + 1; i < points.length; ++i) {\n        var pi = points[i],\n          xDist = pi.pos.x - p.pos.x,\n          yDist = pi.pos.y - p.pos.y,\n          rate = 1 - (xDist * xDist + yDist * yDist) / (dist * dist);\n        if (rate > 0) {\n          ctx.lineWidth = 0.4;\n          ctx.strokeStyle = \"rgba(\" + p.color.r + \",\" + p.color.g + \",\" + p.color.b + \",\" + rate + \")\";\n          ctx.beginPath();\n          ctx.moveTo(p.pos.x, p.pos.y);\n          ctx.lineTo(pi.pos.x, pi.pos.y);\n          ctx.stroke();\n        }\n      }\n    });\n  }, 1000 / frame);\n}\n_c = Background;\nvar _c;\n$RefreshReg$(_c, \"Background\");","map":{"version":3,"names":["Background","count","speed","dist","image","rSpeed","rMax","frame","cvs","document","createElement","div","ctx","getContext","w","width","window","innerWidth","h","height","innerHeight","r","rVel","points","id","style","backgroundImage","body","appendChild","i","push","size","Math","random","pos","x","y","vel","color","g","b","setInterval","transform","clearRect","forEach","p","idx","fillStyle","fillRect","length","pi","xDist","yDist","rate","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","_c","$RefreshReg$"],"sources":["E:/MyProjects/BookStore/BookStore-Frontend-react/src/components/background/background.jsx"],"sourcesContent":["import './background.css'\r\n\r\nexport default function Background() {\r\n //配置\r\n  const count = 320, //点数量\r\n    speed = 1, //点平均速度\r\n    dist = 60, //点间成线最大距离\r\n    image = \"../../src/background.png\", //图片地址\r\n    rSpeed = 0.05, //图片旋转速度\r\n    rMax = 80, //图片旋转最大角度\r\n    frame = 20 //帧率\r\n\r\n  var cvs = document.createElement(\"canvas\"),\r\n    div = document.createElement(\"div\"),\r\n    ctx = cvs.getContext(\"2d\"),\r\n    w = cvs.width = window.innerWidth,\r\n    h = cvs.height = window.innerHeight,\r\n    r = 0,\r\n    rVel = rSpeed,\r\n    points = []\r\n  cvs.id = \"background-canvas\"\r\n  div.id = \"background-image\"\r\n  div.style.backgroundImage = \"url('\" + image + \"')\"\r\n  document.body.appendChild(cvs)\r\n  document.body.appendChild(div)\r\n  for (var i = 0; i < count; ++i) {\r\n    points.push({\r\n      size: Math.random() * 4 + 0.5,\r\n      pos: {\r\n        x: Math.random() * w,\r\n        y: Math.random() * h\r\n      },\r\n      vel: {\r\n        x: (Math.random() - 0.5) * speed,\r\n        y: (Math.random() - 0.5) * speed\r\n      },\r\n      color: {\r\n        r: Math.random() * 255,\r\n        g: Math.random() * 255,\r\n        b: Math.random() * 255\r\n      }\r\n    })\r\n  }\r\n\r\n  setInterval(() => {\r\n    w = window.innerWidth\r\n    h =  window.innerHeight\r\n    r += rVel\r\n    if ((r > rMax && rVel > 0) || (r < -rMax && rVel < 0)) rVel *= -1\r\n    div.style.transform = \"rotate(\" + r + \"deg)\"\r\n    ctx.clearRect(0, 0, w, h)\r\n    points.forEach((p, idx) => {\r\n      p.pos.x += p.vel.x\r\n      p.pos.y += p.vel.y\r\n      if ((p.pos.x <= 0 && p.vel.x < 0) || (p.pos.x >= w && p.vel.x > 0)) p.vel.x *= -1\r\n      if ((p.pos.y <= 0 && p.vel.y < 0) || (p.pos.y >= h && p.vel.y > 0)) p.vel.y *= -1\r\n      ctx.fillStyle = \"white\"\r\n      ctx.fillRect(p.pos.x - p.size / 2, p.pos.y - p.size / 2, p.size, p.size)\r\n      for (var i = idx + 1; i < points.length; ++i) {\r\n        var pi = points[i],\r\n          xDist = pi.pos.x - p.pos.x,\r\n          yDist = pi.pos.y - p.pos.y,\r\n          rate = 1 - (xDist * xDist + yDist * yDist) / (dist * dist)\r\n        if (rate > 0) {\r\n          ctx.lineWidth = 0.4\r\n          ctx.strokeStyle = \"rgba(\" + p.color.r + \",\" + p.color.g + \",\" + p.color.b + \",\" + rate + \")\"\r\n          ctx.beginPath()\r\n          ctx.moveTo(p.pos.x, p.pos.y)\r\n          ctx.lineTo(pi.pos.x, pi.pos.y)\r\n          ctx.stroke()\r\n        }\r\n      }\r\n    })\r\n  }, 1000 / frame)\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}